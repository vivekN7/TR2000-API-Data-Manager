<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TR2000 Phase 2: Detailed ERD Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        
        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .nav-tab:hover {
            background: #f0f4f8;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .content-section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #1e3c72;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2a5298;
            font-size: 1.8em;
        }
        
        h3 {
            color: #2a5298;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
        }
        
        h4 {
            color: #1e3c72;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
        }
        
        .erd-diagram {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .entity-box {
            background: white;
            border: 2px solid #2a5298;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .entity-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-radius: 6px 6px 0 0;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .field-list {
            list-style: none;
        }
        
        .field-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
        }
        
        .field-list li:last-child {
            border-bottom: none;
        }
        
        .field-name {
            font-weight: 600;
            color: #2a5298;
        }
        
        .field-type {
            color: #666;
            font-size: 0.9em;
        }
        
        .field-key {
            background: #ffd700;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .field-fk {
            background: #87ceeb;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .field-audit {
            background: #98fb98;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .field-etl {
            background: #dda0dd;
            color: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .relationship-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .entity-node {
            background: white;
            border: 3px solid #2a5298;
            padding: 15px 25px;
            border-radius: 8px;
            margin: 10px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .entity-node.primary {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .relationship-line {
            width: 50px;
            height: 2px;
            background: #2a5298;
            position: relative;
        }
        
        .relationship-label {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            color: #666;
            white-space: nowrap;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .legend {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .legend-item {
            display: inline-block;
            margin: 5px 15px 5px 0;
        }
        
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 12px;
            margin-right: 5px;
            border-radius: 2px;
            vertical-align: middle;
        }
        
        .stats-box {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 10px 0;
        }
        
        .stats-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stats-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .alert-info {
            background: #e6f3ff;
            border-left: 4px solid #3182ce;
            color: #2c5282;
        }
        
        .cardinality {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
        }
        
        .scroll-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        
        .large-diagram {
            min-width: 1200px;
            padding: 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TR2000 Phase 2: Detailed Entity Relationship Diagram</h1>
            <p class="subtitle">Complete Database Schema Documentation for Oracle Staging Database</p>
        </header>
        
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">ERD Overview</button>
            <button class="nav-tab" onclick="showTab('master')">Master Entities</button>
            <button class="nav-tab" onclick="showTab('issues')">Issues & References</button>
            <button class="nav-tab" onclick="showTab('pcs')">PCS Structure</button>
            <button class="nav-tab" onclick="showTab('vds')">VDS & Bolt</button>
            <button class="nav-tab" onclick="showTab('etl')">ETL Control</button>
            <button class="nav-tab" onclick="showTab('relationships')">Relationships</button>
            <button class="nav-tab" onclick="showTab('keys')">Keys & Indexes</button>
        </nav>
        
        <!-- ERD Overview -->
        <div id="overview" class="content-section active">
            <div class="card">
                <h2>Complete Entity Relationship Overview</h2>
                
                <div class="grid">
                    <div class="stats-box">
                        <div class="stats-number">50+</div>
                        <div class="stats-label">Database Tables</div>
                    </div>
                    <div class="stats-box">
                        <div class="stats-number">500+</div>
                        <div class="stats-label">Data Fields</div>
                    </div>
                    <div class="stats-box">
                        <div class="stats-number">31</div>
                        <div class="stats-label">API Endpoints</div>
                    </div>
                    <div class="stats-box">
                        <div class="stats-number">SCD Type 2</div>
                        <div class="stats-label">History Tracking</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2>High-Level Entity Relationship Diagram</h2>
                
                <div class="erd-diagram">
┌──────────────┐
│  OPERATORS   │
└──────┬───────┘
       │ 1:M
       ▼
┌──────────────┐      ┌────────────────────────────────────────────────┐
│   PLANTS     │◄─────│  Plant is central entity connecting all data   │
└──────┬───────┘      └────────────────────────────────────────────────┘
       │
       ├─────────────────────────────────────────┐
       │ 1:M                                     │ 1:M
       ▼                                         ▼
┌──────────────┐                          ┌──────────────┐
│   ISSUES     │                          │     PCS      │
└──────┬───────┘                          └──────┬───────┘
       │                                          │
       │ 1:M (9 reference types)                  │ 1:1 (6 detail types)
       ▼                                          ▼
┌─────────────────────────┐              ┌─────────────────────────┐
│  REFERENCE TABLES:      │              │  PCS DETAIL TABLES:     │
├─────────────────────────┤              ├─────────────────────────┤
│ • PCS_REFERENCES        │              │ • PCS_DETAILS           │
│ • SC_REFERENCES         │              │ • PCS_TEMP_PRESSURE     │
│ • VSM_REFERENCES        │              │ • PCS_PIPE_SIZES        │
│ • VDS_REFERENCES        │              │ • PCS_PIPE_ELEMENTS     │
│ • EDS_REFERENCES        │              │ • PCS_VALVE_ELEMENTS    │
│ • MDS_REFERENCES        │              │ • PCS_EMBEDDED_NOTES    │
│ • VSK_REFERENCES        │              └─────────────────────────┘
│ • ESK_REFERENCES        │
│ • PIPE_ELEMENT_REFS     │              ┌─────────────────────────┐
└─────────────────────────┘              │  VDS (Independent)      │
                                          ├─────────────────────────┤
┌─────────────────────────┐              │ • VDS                   │
│  BOLT TENSION DATA:     │              │ • VDS_SUBSEGMENTS       │
├─────────────────────────┤              └─────────────────────────┘
│ • BOLT_FLANGE_TYPE      │
│ • BOLT_GASKET_TYPE      │              ┌─────────────────────────┐
│ • BOLT_TENSION_FORCES   │              │  ETL CONTROL:           │
└─────────────────────────┘              ├─────────────────────────┤
       ▲                                  │ • ETL_CONTROL           │
       │                                  │ • ETL_ENDPOINT_LOG      │
       └──────── Plant Code               │ • ETL_VALIDATION_RULES  │
                                          │ • ETL_VALIDATION_RESULTS│
                                          │ • ETL_AUDIT_LOG         │
                                          └─────────────────────────┘
                </div>
            </div>
            
            <div class="card">
                <h2>Key Design Principles</h2>
                
                <div class="legend">
                    <h4>Field Type Legend:</h4>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #ffd700;"></span>
                        <span>Primary Key (PK)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #87ceeb;"></span>
                        <span>Foreign Key (FK)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #98fb98;"></span>
                        <span>Audit Fields</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background: #dda0dd;"></span>
                        <span>ETL Metadata</span>
                    </div>
                </div>
                
                <h3>Temporal Data Management</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Type</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EXTRACTION_DATE</td>
                            <td>TIMESTAMP</td>
                            <td>When data was extracted from API</td>
                        </tr>
                        <tr>
                            <td>IS_CURRENT</td>
                            <td>CHAR(1)</td>
                            <td>'Y' for current record, 'N' for historical</td>
                        </tr>
                        <tr>
                            <td>VALID_FROM</td>
                            <td>TIMESTAMP</td>
                            <td>Start of record validity period</td>
                        </tr>
                        <tr>
                            <td>VALID_TO</td>
                            <td>TIMESTAMP</td>
                            <td>End of record validity (9999-12-31 for current)</td>
                        </tr>
                        <tr>
                            <td>HASH_VALUE</td>
                            <td>VARCHAR2(64)</td>
                            <td>SHA-256 hash for change detection</td>
                        </tr>
                        <tr>
                            <td>ETL_RUN_ID</td>
                            <td>NUMBER</td>
                            <td>Links to specific ETL execution</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Master Entities -->
        <div id="master" class="content-section">
            <div class="card">
                <h2>Master Data Entities</h2>
                
                <div class="entity-box">
                    <div class="entity-header">STG_OPERATORS</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">OPERATOR_ID</span>
                            <span>NUMBER <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">OPERATOR_NAME</span>
                            <span>VARCHAR2(200)</span>
                        </li>
                        <li>
                            <span class="field-name">ETL_RUN_ID</span>
                            <span>NUMBER <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">IS_CURRENT</span>
                            <span>CHAR(1) <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">VALID_FROM</span>
                            <span>TIMESTAMP <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">VALID_TO</span>
                            <span>TIMESTAMP <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">HASH_VALUE</span>
                            <span>VARCHAR2(64) <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <div class="entity-box">
                    <div class="entity-header">STG_PLANTS</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">PLANT_ID</span>
                            <span>VARCHAR2(50) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">OPERATOR_ID</span>
                            <span>NUMBER <span class="field-fk">FK</span></span>
                        </li>
                        <li>
                            <span class="field-name">OPERATOR_NAME</span>
                            <span>VARCHAR2(200)</span>
                        </li>
                        <li>
                            <span class="field-name">SHORT_DESCRIPTION</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">PROJECT</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">LONG_DESCRIPTION</span>
                            <span>VARCHAR2(500)</span>
                        </li>
                        <li>
                            <span class="field-name">COMMON_LIB_PLANT_CODE</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">INITIAL_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">AREA_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">AREA</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">CATEGORY_ID</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">CATEGORY</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">DOCUMENT_SPACE_LINK</span>
                            <span>VARCHAR2(500)</span>
                        </li>
                        <li>
                            <span class="field-name">CELSIUS_BAR</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">VISIBLE</span>
                            <span>VARCHAR2(10)</span>
                        </li>
                        <li>
                            <span class="field-name">USER_PROTECTED</span>
                            <span>VARCHAR2(10) <span class="field-audit">AUDIT</span></span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">ETL_RUN_ID</span>
                            <span>NUMBER <span class="field-etl">ETL</span></span>
                        </li>
                        <li>
                            <span class="field-name">IS_CURRENT</span>
                            <span>CHAR(1) <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <div class="cardinality">
                    <strong>Relationship Cardinality:</strong><br>
                    OPERATORS (1) ────────► (M) PLANTS<br>
                    • One operator can have multiple plants<br>
                    • Each plant belongs to exactly one operator
                </div>
            </div>
        </div>
        
        <!-- Issues & References -->
        <div id="issues" class="content-section">
            <div class="card">
                <h2>Issues and Reference Tables</h2>
                
                <div class="entity-box">
                    <div class="entity-header">STG_ISSUES (Central Entity)</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">PLANT_ID</span>
                            <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                        </li>
                        <li>
                            <span class="field-name">ISSUE_REVISION</span>
                            <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">STATUS</span>
                            <span>VARCHAR2(10)</span>
                        </li>
                        <li>
                            <span class="field-name">REV_DATE</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">PROTECT_STATUS</span>
                            <span>VARCHAR2(10)</span>
                        </li>
                        <li>
                            <span class="field-name">GENERAL_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">PCS_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">EDS_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">VDS_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">VSK_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">MDS_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">ESK_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">SC_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">VSM_REVISION</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">USER_NAME</span>
                            <span>VARCHAR2(100) <span class="field-audit">AUDIT</span></span>
                        </li>
                        <li>
                            <span class="field-name">USER_ENTRY_TIME</span>
                            <span>VARCHAR2(50) <span class="field-audit">AUDIT</span></span>
                        </li>
                        <li>
                            <span class="field-name">USER_PROTECTED</span>
                            <span>VARCHAR2(10) <span class="field-audit">AUDIT</span></span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <h3>Reference Tables (9 Types)</h3>
                <div class="grid">
                    <div class="entity-box">
                        <div class="entity-header">STG_PCS_REFERENCES</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_ID</span>
                                <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ISSUE_REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">PCS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">REV_DATE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">STATUS</span>
                                <span>VARCHAR2(10)</span>
                            </li>
                            <li>
                                <span class="field-name">OFFICIAL_REVISION</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">REVISION_SUFFIX</span>
                                <span>VARCHAR2(10)</span>
                            </li>
                            <li>
                                <span class="field-name">RATING_CLASS</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">MATERIAL_GROUP</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">HISTORICAL_PCS</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">DELTA</span>
                                <span>VARCHAR2(10)</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">STG_MDS_REFERENCES</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_ID</span>
                                <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ISSUE_REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">MDS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">AREA</span>
                                <span>VARCHAR2(100) <em>(Unique to MDS)</em></span>
                            </li>
                            <li>
                                <span class="field-name">REV_DATE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">STATUS</span>
                                <span>VARCHAR2(10)</span>
                            </li>
                            <li>
                                <span class="field-name">OFFICIAL_REVISION</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">DELTA</span>
                                <span>VARCHAR2(10)</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> Similar structure applies to SC, VSM, VDS, EDS, VSK, and ESK reference tables. 
                    Each maintains the same relationship pattern with ISSUES table and includes audit fields from API headers.
                </div>
                
                <div class="cardinality">
                    <strong>Relationship Cardinality:</strong><br>
                    PLANTS (1) ────────► (M) ISSUES<br>
                    ISSUES (1) ────────► (M) PCS_REFERENCES<br>
                    ISSUES (1) ────────► (M) SC_REFERENCES<br>
                    ISSUES (1) ────────► (M) VSM_REFERENCES<br>
                    ISSUES (1) ────────► (M) VDS_REFERENCES<br>
                    ISSUES (1) ────────► (M) EDS_REFERENCES<br>
                    ISSUES (1) ────────► (M) MDS_REFERENCES<br>
                    ISSUES (1) ────────► (M) VSK_REFERENCES<br>
                    ISSUES (1) ────────► (M) ESK_REFERENCES<br>
                    ISSUES (1) ────────► (M) PIPE_ELEMENT_REFERENCES
                </div>
            </div>
        </div>
        
        <!-- PCS Structure -->
        <div id="pcs" class="content-section">
            <div class="card">
                <h2>PCS (Piping Class Specification) Structure</h2>
                
                <div class="erd-diagram">
                     STG_PCS (Master)
                           │
                           ├──► STG_PCS_DETAILS (1:1)
                           ├──► STG_PCS_TEMP_PRESSURE (1:1)
                           ├──► STG_PCS_PIPE_SIZES (1:M)
                           ├──► STG_PCS_PIPE_ELEMENTS (1:M)
                           ├──► STG_PCS_VALVE_ELEMENTS (1:M)
                           └──► STG_PCS_EMBEDDED_NOTES (1:M)
                </div>
                
                <div class="entity-box">
                    <div class="entity-header">STG_PCS (Master Table)</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">PLANT_ID</span>
                            <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                        </li>
                        <li>
                            <span class="field-name">PCS</span>
                            <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">REVISION</span>
                            <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">STATUS</span>
                            <span>VARCHAR2(10)</span>
                        </li>
                        <li>
                            <span class="field-name">REV_DATE</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">RATING_CLASS</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">TEST_PRESSURE</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">MATERIAL_GROUP</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">DESIGN_CODE</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">LAST_UPDATE</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">LAST_UPDATE_BY</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">APPROVER</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">NOTEPAD</span>
                            <span>CLOB</span>
                        </li>
                        <li>
                            <span class="field-name">SPECIAL_REQ_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">TUBE_PCS</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">NEW_VDS_SECTION</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <div class="grid">
                    <div class="entity-box">
                        <div class="entity-header">STG_PCS_PIPE_SIZES</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_ID</span>
                                <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">PCS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">NOM_SIZE</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">OUTER_DIAM</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">WALL_THICKNESS</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">SCHEDULE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">UNDER_TOLERANCE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">CORROSION_ALLOWANCE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">WELDING_FACTOR</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">STG_PCS_PIPE_ELEMENTS</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_ID</span>
                                <span>VARCHAR2(50) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">PCS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">REVISION</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ELEMENT_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">LINE_NO</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ELEMENT</span>
                                <span>VARCHAR2(200)</span>
                            </li>
                            <li>
                                <span class="field-name">DIM_STANDARD</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">FROM_SIZE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">TO_SIZE</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">PRODUCT_FORM</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">MATERIAL</span>
                                <span>VARCHAR2(200)</span>
                            </li>
                            <li>
                                <span class="field-name">MDS</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">EDS</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <strong>PCS Detail Tables:</strong> Each PCS can have multiple pipe sizes, pipe elements, valve elements, and embedded notes. 
                    The PCS_DETAILS table contains extended header information with 40+ additional fields including design pressures and temperatures.
                </div>
            </div>
        </div>
        
        <!-- VDS & Bolt -->
        <div id="vds" class="content-section">
            <div class="card">
                <h2>VDS and Bolt Tension Tables</h2>
                
                <h3>VDS (Valve Datasheet) Structure</h3>
                <div class="entity-box">
                    <div class="entity-header">STG_VDS</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">VDS</span>
                            <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">REVISION</span>
                            <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">STATUS</span>
                            <span>VARCHAR2(10)</span>
                        </li>
                        <li>
                            <span class="field-name">REV_DATE</span>
                            <span>VARCHAR2(20)</span>
                        </li>
                        <li>
                            <span class="field-name">LAST_UPDATE</span>
                            <span>VARCHAR2(50)</span>
                        </li>
                        <li>
                            <span class="field-name">LAST_UPDATE_BY</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">DESCRIPTION</span>
                            <span>VARCHAR2(500)</span>
                        </li>
                        <li>
                            <span class="field-name">NOTEPAD</span>
                            <span>CLOB</span>
                        </li>
                        <li>
                            <span class="field-name">SPECIAL_REQ_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">VALVE_TYPE_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">RATING_CLASS_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">MATERIAL_GROUP_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">END_CONNECTION_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">BORE_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">VDS_SIZE_ID</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">SIZE_RANGE</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">CUSTOM_NAME</span>
                            <span>VARCHAR2(200)</span>
                        </li>
                        <li>
                            <span class="field-name">SUBSEGMENT_LIST</span>
                            <span>VARCHAR2(500)</span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <div class="entity-box">
                    <div class="entity-header">STG_VDS_SUBSEGMENTS</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">VDS</span>
                            <span>VARCHAR2(100) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                        </li>
                        <li>
                            <span class="field-name">REVISION</span>
                            <span>VARCHAR2(20) <span class="field-key">PK</span> <span class="field-fk">FK</span></span>
                        </li>
                        <li>
                            <span class="field-name">SUBSEGMENT_ID</span>
                            <span>NUMBER <span class="field-key">PK</span></span>
                        </li>
                        <li>
                            <span class="field-name">SUBSEGMENT_NAME</span>
                            <span>VARCHAR2(200)</span>
                        </li>
                        <li>
                            <span class="field-name">SEQUENCE</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">MIN_OPERATING_TEMP</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">MAX_OPERATING_TEMP</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">VDS_DESCRIPTION</span>
                            <span>VARCHAR2(500)</span>
                        </li>
                        <li>
                            <span class="field-name">EXTRACTION_DATE</span>
                            <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                        </li>
                    </ul>
                </div>
                
                <h3>Bolt Tension Tables</h3>
                <div class="grid">
                    <div class="entity-box">
                        <div class="entity-header">STG_BOLT_FLANGE_TYPE</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_CODE</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">PCS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">FLANGE_SIZE</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">FLANGE_TYPE_ID</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">DISPLAY</span>
                                <span>VARCHAR2(200)</span>
                            </li>
                            <li>
                                <span class="field-name">COMPONENT_TYPE</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">FLANGE_OR_MECHJOINT</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">RATING_CLASS</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">STG_BOLT_TENSION_FORCES</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">PLANT_CODE</span>
                                <span>VARCHAR2(20) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">PCS</span>
                                <span>VARCHAR2(100) <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">FLANGE_TYPE_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">GASKET_TYPE_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">BOLT_MATERIAL_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">FLANGE_SIZE</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">NO_OF_BOLTS</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">BOLT_DIAMETER</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">KN</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">NM</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">EXTRACTION_DATE</span>
                                <span>TIMESTAMP <span class="field-key">PK</span> <span class="field-etl">ETL</span></span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <strong>Note:</strong> VDS tables are independent and not directly linked to Plants. 
                    Bolt Tension tables use PLANT_CODE (derived from COMMON_LIB_PLANT_CODE) instead of PLANT_ID.
                </div>
            </div>
        </div>
        
        <!-- ETL Control -->
        <div id="etl" class="content-section">
            <div class="card">
                <h2>ETL Control and Monitoring Tables</h2>
                
                <div class="entity-box">
                    <div class="entity-header">ETL_CONTROL (Main Control Table)</div>
                    <ul class="field-list">
                        <li>
                            <span class="field-name">ETL_RUN_ID</span>
                            <span>NUMBER <span class="field-key">PK</span> IDENTITY</span>
                        </li>
                        <li>
                            <span class="field-name">RUN_DATE</span>
                            <span>TIMESTAMP</span>
                        </li>
                        <li>
                            <span class="field-name">RUN_TYPE</span>
                            <span>VARCHAR2(20) (FULL/INCREMENTAL/DELTA)</span>
                        </li>
                        <li>
                            <span class="field-name">STATUS</span>
                            <span>VARCHAR2(20) (RUNNING/SUCCESS/FAILED)</span>
                        </li>
                        <li>
                            <span class="field-name">RECORDS_EXTRACTED</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">RECORDS_LOADED</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">RECORDS_REJECTED</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">ERROR_COUNT</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">WARNING_COUNT</span>
                            <span>NUMBER</span>
                        </li>
                        <li>
                            <span class="field-name">START_TIME</span>
                            <span>TIMESTAMP</span>
                        </li>
                        <li>
                            <span class="field-name">END_TIME</span>
                            <span>TIMESTAMP</span>
                        </li>
                        <li>
                            <span class="field-name">DURATION_SECONDS</span>
                            <span>NUMBER (CALCULATED)</span>
                        </li>
                        <li>
                            <span class="field-name">INITIATED_BY</span>
                            <span>VARCHAR2(100)</span>
                        </li>
                        <li>
                            <span class="field-name">COMMENTS</span>
                            <span>VARCHAR2(4000)</span>
                        </li>
                    </ul>
                </div>
                
                <div class="grid">
                    <div class="entity-box">
                        <div class="entity-header">ETL_ENDPOINT_LOG</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">LOG_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ETL_RUN_ID</span>
                                <span>NUMBER <span class="field-fk">FK</span></span>
                            </li>
                            <li>
                                <span class="field-name">ENDPOINT_NAME</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">PLANT_ID</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">API_URL</span>
                                <span>VARCHAR2(500)</span>
                            </li>
                            <li>
                                <span class="field-name">HTTP_STATUS_CODE</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">RESPONSE_TIME_MS</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">RECORD_COUNT</span>
                                <span>NUMBER</span>
                            </li>
                            <li>
                                <span class="field-name">STATUS</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">ERROR_MESSAGE</span>
                                <span>VARCHAR2(4000)</span>
                            </li>
                            <li>
                                <span class="field-name">PROCESSED_DATE</span>
                                <span>TIMESTAMP</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">ETL_VALIDATION_RULES</div>
                        <ul class="field-list">
                            <li>
                                <span class="field-name">RULE_ID</span>
                                <span>NUMBER <span class="field-key">PK</span></span>
                            </li>
                            <li>
                                <span class="field-name">TABLE_NAME</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">COLUMN_NAME</span>
                                <span>VARCHAR2(100)</span>
                            </li>
                            <li>
                                <span class="field-name">RULE_TYPE</span>
                                <span>VARCHAR2(50)</span>
                            </li>
                            <li>
                                <span class="field-name">RULE_EXPRESSION</span>
                                <span>VARCHAR2(1000)</span>
                            </li>
                            <li>
                                <span class="field-name">ERROR_SEVERITY</span>
                                <span>VARCHAR2(20)</span>
                            </li>
                            <li>
                                <span class="field-name">ERROR_MESSAGE</span>
                                <span>VARCHAR2(500)</span>
                            </li>
                            <li>
                                <span class="field-name">IS_ACTIVE</span>
                                <span>CHAR(1)</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="cardinality">
                    <strong>ETL Relationships:</strong><br>
                    ETL_CONTROL (1) ────────► (M) ETL_ENDPOINT_LOG<br>
                    ETL_CONTROL (1) ────────► (M) ETL_VALIDATION_RESULTS<br>
                    ETL_VALIDATION_RULES (1) ────────► (M) ETL_VALIDATION_RESULTS<br>
                    <br>
                    Every staging table has ETL_RUN_ID linking back to ETL_CONTROL
                </div>
            </div>
        </div>
        
        <!-- Relationships -->
        <div id="relationships" class="content-section">
            <div class="card">
                <h2>Complete Relationship Matrix</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>Parent Table</th>
                            <th>Child Table</th>
                            <th>Relationship</th>
                            <th>Join Keys</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>STG_OPERATORS</td>
                            <td>STG_PLANTS</td>
                            <td>1:M</td>
                            <td>OPERATOR_ID</td>
                        </tr>
                        <tr>
                            <td>STG_PLANTS</td>
                            <td>STG_ISSUES</td>
                            <td>1:M</td>
                            <td>PLANT_ID</td>
                        </tr>
                        <tr>
                            <td>STG_PLANTS</td>
                            <td>STG_PCS</td>
                            <td>1:M</td>
                            <td>PLANT_ID</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_PCS_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_SC_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_VSM_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_VDS_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_EDS_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_MDS_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_VSK_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_ESK_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>STG_PIPE_ELEMENT_REFERENCES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, ISSUE_REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_DETAILS</td>
                            <td>1:1</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_TEMP_PRESSURE</td>
                            <td>1:1</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_PIPE_SIZES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_PIPE_ELEMENTS</td>
                            <td>1:M</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_VALVE_ELEMENTS</td>
                            <td>1:M</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>STG_PCS_EMBEDDED_NOTES</td>
                            <td>1:M</td>
                            <td>PLANT_ID, PCS, REVISION</td>
                        </tr>
                        <tr>
                            <td>STG_VDS</td>
                            <td>STG_VDS_SUBSEGMENTS</td>
                            <td>1:M</td>
                            <td>VDS, REVISION</td>
                        </tr>
                        <tr>
                            <td>ETL_CONTROL</td>
                            <td>All STG_* Tables</td>
                            <td>1:M</td>
                            <td>ETL_RUN_ID</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="card">
                <h2>Referential Integrity Rules</h2>
                
                <div class="alert alert-info">
                    <strong>Important:</strong> All relationships include EXTRACTION_DATE in joins for temporal queries.
                </div>
                
                <h3>Cascade Rules</h3>
                <ul>
                    <li><strong>No CASCADE DELETE</strong> - Historical data must be preserved</li>
                    <li><strong>Soft Deletes Only</strong> - Use IS_CURRENT = 'N' to mark as inactive</li>
                    <li><strong>Temporal Integrity</strong> - VALID_TO updated when new version inserted</li>
                </ul>
                
                <h3>Orphan Prevention</h3>
                <ul>
                    <li>All reference tables require valid PLANT_ID and ISSUE_REVISION</li>
                    <li>PCS detail tables require valid PLANT_ID, PCS, and REVISION</li>
                    <li>VDS subsegments require valid VDS and REVISION</li>
                </ul>
            </div>
        </div>
        
        <!-- Keys & Indexes -->
        <div id="keys" class="content-section">
            <div class="card">
                <h2>Primary Keys and Indexing Strategy</h2>
                
                <h3>Composite Primary Key Pattern</h3>
                <div class="alert alert-info">
                    All staging tables use composite primary keys: <strong>Business Keys + EXTRACTION_DATE</strong>
                </div>
                
                <table>
                    <thead>
                        <tr>
                            <th>Table</th>
                            <th>Primary Key Components</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>STG_OPERATORS</td>
                            <td>OPERATOR_ID, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_PLANTS</td>
                            <td>PLANT_ID, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_ISSUES</td>
                            <td>PLANT_ID, ISSUE_REVISION, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_PCS_REFERENCES</td>
                            <td>PLANT_ID, ISSUE_REVISION, PCS, REVISION, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_PCS</td>
                            <td>PLANT_ID, PCS, REVISION, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_PCS_PIPE_SIZES</td>
                            <td>PLANT_ID, PCS, REVISION, NOM_SIZE, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_PCS_PIPE_ELEMENTS</td>
                            <td>PLANT_ID, PCS, REVISION, ELEMENT_ID, LINE_NO, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_VDS</td>
                            <td>VDS, REVISION, EXTRACTION_DATE</td>
                        </tr>
                        <tr>
                            <td>STG_VDS_SUBSEGMENTS</td>
                            <td>VDS, REVISION, SUBSEGMENT_ID, EXTRACTION_DATE</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3>Performance Indexes</h3>
                <div class="grid">
                    <div class="entity-box">
                        <div class="entity-header">Current Data Indexes</div>
                        <ul>
                            <li>IDX_STG_OPERATORS_CURRENT</li>
                            <li>IDX_STG_PLANTS_CURRENT</li>
                            <li>IDX_STG_ISSUES_CURRENT</li>
                            <li>IDX_STG_PCS_CURRENT</li>
                            <li>IDX_STG_VDS_CURRENT</li>
                        </ul>
                        <p style="margin-top: 10px; font-style: italic;">
                            Optimized for queries filtering on IS_CURRENT = 'Y'
                        </p>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">ETL Processing Indexes</div>
                        <ul>
                            <li>IDX_STG_PLANTS_ETL</li>
                            <li>IDX_STG_ISSUES_ETL</li>
                            <li>IDX_STG_PCS_ETL</li>
                            <li>IDX_ETL_ENDPOINT_LOG_RUN</li>
                            <li>IDX_ETL_ENDPOINT_LOG_STATUS</li>
                        </ul>
                        <p style="margin-top: 10px; font-style: italic;">
                            Optimized for ETL operations and monitoring
                        </p>
                    </div>
                    
                    <div class="entity-box">
                        <div class="entity-header">Relationship Indexes</div>
                        <ul>
                            <li>IDX_STG_ISSUES_PLANT</li>
                            <li>IDX_STG_PCS_REF_ISSUE</li>
                            <li>IDX_STG_PCS_DETAILS_PCS</li>
                        </ul>
                        <p style="margin-top: 10px; font-style: italic;">
                            Optimized for join operations
                        </p>
                    </div>
                </div>
                
                <h3>Partitioning Strategy</h3>
                <div class="alert alert-info">
                    <strong>Recommendation:</strong> Implement monthly range partitioning on EXTRACTION_DATE for tables expected to exceed 10M records.
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function showTab(tabName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            
            // Mark selected tab as active
            event.target.classList.add('active');
        }
    </script>
</body>
</html>